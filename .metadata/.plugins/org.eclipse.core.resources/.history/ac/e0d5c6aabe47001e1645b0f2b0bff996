/**
 * 
 */
package com.wibmo.repository;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.Mockito.doNothing;
import static org.mockito.Mockito.doThrow;
import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import java.util.ArrayList;
import java.util.List;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.mockito.junit.jupiter.MockitoExtension;

import com.wibmo.entity.Professor;
import com.wibmo.exception.CourseNotAssignedException;
import com.wibmo.exception.CourseNotFoundException;
import com.wibmo.exception.UserNotFoundException;
import com.wibmo.service.ProfessorOperationImpl;

/**
 * 
 */
@ExtendWith(MockitoExtension.class)
public class TestProfessorDAO {
	@Mock
	ProfessorOperationImpl professorOp;
	
	@Mock
	ProfessorRepository professorDao;
	
	@BeforeEach
	void setUp() {
		MockitoAnnotations.openMocks(this);
	}
	
	@Test
	public void viewProfessor() {
		//given
		Professor user = new Professor();
		user.setUserId(1);
		user.setUserName("satwika");
		user.setUserEmail("satwika@gmail.com");
		user.setUserPhonenumber(73749282);
		user.setUserPassword("satwika");
		
		List<Professor> users = new ArrayList<>();
		users.add(user);
		professorDao.saveAll(users);
		when(professorDao.findAll()).thenReturn(users);
		
		//when
		List<Professor> profList = professorOp.viewProfessor();
		
		//then
		assertEquals(1, profList.size());
	}
	
	@Test
	public void getProfessorById()
	{
		Professor user = new Professor();
		user.setUserId(1);
		user.setUserName("dixit");
		user.setUserEmail("dixit@gmail.com");
		user.setUserPhonenumber(73749282);
		user.setUserPassword("dixit");
		professorDao.save(user);
		
		when(professorOp.getProfessorById("dixit@gmail.com")).thenReturn(user.getUserId());
		
		//when
		int i = professorOp.getProfessorById("dixit@gmail.com");
		
		//then
		assertEquals(user.getUserId(), i);
	}
	
	@Test
	public void  setGrades() throws UserNotFoundException, CourseNotFoundException, CourseNotAssignedException
	{
        doThrow(new RuntimeException()).when(professorOp).setGrades(1,1,1,"A");
        professorOp.setGrades(1,1,1,"A");
        verify(professorOp,times(1)).setGrades(1,1,1,"A");
	}
	
	@Test
	public void  requestCourseOffering()
	{
		
	}
	
	@Test
	public void registerProfessor()
	{
		
	}
}
